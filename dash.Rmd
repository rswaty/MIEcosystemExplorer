---
title: "Michigan's Ecosystems Past and Present"
output: 
  flexdashboard::flex_dashboard:
    storyboard: true
    theme: spacelab

  always_allow_html: yes
---



```{r message=FALSE, warning=FALSE, include=FALSE}
library(readr)
library(ggplot2)
library(plotly)
library(RColorBrewer)
library(scales)
library(leaflet)
library(dplyr)
library(sf)
library(raster)

```







```{r}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
```


### This dashboard {data-commentary-width=400}


```{r echo=FALSE, message=FALSE, warning=FALSE}
htmltools::tags$iframe(title = "My embedded document", src = "m.html", frameborder = "0", width = "100%", height="800")
```

<br>

*** 

**Welcome!!**

<br>

This dashboard was built as springboard for learning about the ecosystems of the Great Lakes with a focus on Minnesota, Wisconsin and Michigan.  Before we dig into the trees, maps, charts and other things we'll need to make sure we get a few things established:

* Are you a lumper or a splitter?  Take [this quiz](./Lumper-Splitter (1).docx){target='blank'} to find out and to see why that matters. 
* The vegetation maps you'll see are comprised of 572,176,275 30m x 30m squares we call "pixels".  
* Each pixel was labeled by scientists with the [LANDFIRE](www.landfire.gov) program.  
* The terrestrial vegetation in these three states cover 127,023,133 acres 

<br>

**What is an ecosystem?**
Technically an ecosystem is a community of living things interacting with each other and their environment.  To *greatly* simplify here we'll focus on trees to help identify our ecosystems.  





### Looking back {data-commentary-width=400}

```{r BpSchart, echo=FALSE, message=FALSE, warning=FALSE}
bpsTen <- read_csv("bpsTen.csv")

bpsCol <- rgb(bpsTen$R, bpsTen$G, bpsTen$B, maxColorValue=255)

bpsTen$HexColor <- bpsCol #Add new HexColor column to dataframe


p1 <-
  ggplot() +
  geom_col(data=bpsTen, aes(x=reorder(bpsName, acres), y=acres, fill= bpsTen$HexColor)) +
  coord_flip() +
  scale_fill_identity() +
  scale_y_continuous(labels = comma) +
  labs(title="Historical ecosytems of Michigan", subtitle="Top 10 most prevelent ecosystems just prior to European Settlement") +
  xlab("") +
  ylab("Acres") +
  theme(legend.position='none') 

p1 <- ggplotly(p1) 

p1

```

*** 
**The Ecosystems**

* [Northern tallgrass prairie](https://www.nps.gov/tapr/learn/nature/a-complex-prairie-ecosystem.htm){target='blank'}
* [Northern Hardwood Forests](https://en.wikipedia.org/wiki/Northern_hardwood_forest){target='blank'}

etc.

OR...teach them to pick the name apart...what is a "forest" compared to a "savanna"?  Plus showcase some trees?



### Historical Map {data-commentary-width=400}


```{r, echo=FALSE, fig.height=7} 
knitr::include_graphics("bps.JPG")
```

*** 

What patterns do you see?  Use the "Zoom Out" function in your browser to get a little closer.

Remember me asking about historical disturbances like fire?  Explore this [chord diagram](distChord .html)


### Ecosystems Today {data-commentary-width=400}

```{r EVTchart, echo=FALSE, message=FALSE, warning=FALSE}
evtTen <- read_csv("evtTen.csv")

evtCol <- rgb(evtTen$R, evtTen$G, evtTen$B, maxColorValue=255)

evtTen$HexColor <- evtCol #Add new HexColor column to dataframe


evt <-
  ggplot() +
  geom_col(data=evtTen, aes(x=reorder(evtName, acres), y=acres, fill= evtTen$HexColor)) +
  coord_flip() +
  scale_fill_identity() +
  scale_y_continuous(labels = comma) +
  labs(title="Current ecosytems of Michigan", subtitle="Top 10 most prevelent modern ecosystems") +
  xlab("") +
  ylab("Acres") +
  theme(legend.position='none') 

evt <- ggplotly(evt) 

evt

```

*** 

### Change {data-commentary-width=400}



```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width=12}

htmltools::tags$iframe(title = "My embedded document", src = "snky.html", frameborder = "0", width = "100%", height="500")
```

***
